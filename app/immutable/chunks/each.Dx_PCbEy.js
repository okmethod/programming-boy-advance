import{t,d as e}from"./index.DYJ5--4d.js";import{z as n}from"./scheduler.DDBKXN7T.js";function s(t){return void 0!==(null==t?void 0:t.length)?t:Array.from(t)}function o(t,n){t.f(),function(t,n){e(t,1,1,(()=>{n.delete(t.key)}))}(t,n)}function r(e,s,o,r,a,f,c,i,h,u,d,l){let p=e.length,y=f.length,g=p;const k={};for(;g--;)k[e[g].key]=g;const m=[],w=new Map,M=new Map,b=[];for(g=y;g--;){const t=l(a,f,g),e=o(t);let n=c.get(e);n?b.push((()=>n.p(t,s))):(n=u(e,t),n.c()),w.set(e,m[g]=n),e in k&&M.set(e,Math.abs(g-k[e]))}const j=new Set,v=new Set;function x(e){t(e,1),e.m(i,d),c.set(e.key,e),d=e.first,y--}for(;p&&y;){const t=m[y-1],n=e[p-1],s=t.key,o=n.key;t===n?(d=t.first,p--,y--):w.has(o)?!c.has(s)||j.has(s)?x(t):v.has(o)?p--:M.get(s)>M.get(o)?(v.add(s),x(t)):(j.add(o),p--):(h(n,c),p--)}for(;p--;){const t=e[p];w.has(t.key)||h(t,c)}for(;y;)x(m[y-1]);return n(b),m}export{s as e,o as f,r as u};
