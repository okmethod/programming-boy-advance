import{t,d as e}from"./index.C1TJfhvQ.js";import{w as n}from"./scheduler.DX2ogySE.js";function s(t){return void 0!==(null==t?void 0:t.length)?t:Array.from(t)}function o(t,n){t.f(),function(t,n){e(t,1,1,(()=>{n.delete(t.key)}))}(t,n)}function r(e,s,o,r,a,f,c,i,h,u,d,l){let k=e.length,p=f.length,y=k;const g={};for(;y--;)g[e[y].key]=y;const m=[],w=new Map,j=new Map,M=[];for(y=p;y--;){const t=l(a,f,y),e=o(t);let n=c.get(e);n?M.push((()=>n.p(t,s))):(n=u(e,t),n.c()),w.set(e,m[y]=n),e in g&&j.set(e,Math.abs(y-g[e]))}const v=new Set,x=new Set;function S(e){t(e,1),e.m(i,d),c.set(e.key,e),d=e.first,p--}for(;k&&p;){const t=m[p-1],n=e[k-1],s=t.key,o=n.key;t===n?(d=t.first,k--,p--):w.has(o)?!c.has(s)||v.has(s)?S(t):x.has(o)?k--:j.get(s)>j.get(o)?(x.add(s),S(t)):(v.add(o),k--):(h(n,c),k--)}for(;k--;){const t=e[k];w.has(t.key)||h(t,c)}for(;p;)S(m[p-1]);return n(M),m}export{s as e,o as f,r as u};
