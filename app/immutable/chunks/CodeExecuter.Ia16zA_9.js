import{s as e,e as t,a as s,t as o,c as n,d as a,h as r,f as l,m as c,i,j as u,k as d,u as g,o as f,n as h,D as p,z as v,b as m,g as y,l as b,q as x,r as E}from"./scheduler.CkQL2NoT.js";import{S as w,i as $,b as S,c as D,a as I,m as T,t as k,d as C,e as j}from"./index.CnSuYDnm.js";import{e as N}from"./each.CgSPsgrZ.js";import{g as B,s as P}from"./ProgressBar.svelte_svelte_type_style_lang.DlcCZBxH.js";const V={Succeed:{cBackground:"bg-green-100",autohide:!0},Warning:{cBackground:"bg-yellow-100",autohide:!0},Error:{cBackground:"bg-red-100",autohide:!1}};function L(e,t){const s=V[t];return{message:e,background:`${s.cBackground} select-none`,timeout:2e3,autohide:s.autohide}}function z(e){let p,v,m,y,b,x,E,w,$,S,D,I,T;return{c(){p=t("div"),v=t("textarea"),m=s(),y=t("pre"),b=o("    "),x=t("code"),E=o("\n      "),w=o(e[0]),$=o("\n    "),D=o("\n  "),this.h()},l(t){p=n(t,"DIV",{class:!0});var s=a(p);v=n(s,"TEXTAREA",{id:!0,rows:!0,cols:!0,class:!0}),a(v).forEach(r),m=l(s),y=n(s,"PRE",{class:!0});var o=a(y);b=c(o,"    "),x=n(o,"CODE",{id:!0,class:!0});var i=a(x);E=c(i,"\n      "),w=c(i,e[0]),$=c(i,"\n    "),i.forEach(r),D=c(o,"\n  "),o.forEach(r),s.forEach(r),this.h()},h(){i(v,"id",e[2]),v.value=e[0],i(v,"rows",O),i(v,"cols",R),i(v,"class",A+" p-4 border border-gray-300 rounded-md font-mono text-transparent bg-transparent caret-white custom-selection resize-none whitespace-nowrap overflow-hidden absolute top-0 left-0 z-10 svelte-maoyn7"),i(x,"id",e[3]),i(x,"class",S=e[1]+" h-full w-full rounded-md svelte-maoyn7"),i(y,"class",A+" relative -top-6 z-0 svelte-maoyn7"),i(p,"class","relative h-full")},m(t,s){u(t,p,s),d(p,v),d(p,m),d(p,y),d(y,b),d(y,x),d(x,E),d(x,w),d(x,$),d(y,D),I||(T=g(v,"input",e[4]),I=!0)},p(e,[t]){1&t&&(v.value=e[0]),1&t&&f(w,e[0]),2&t&&S!==(S=e[1]+" h-full w-full rounded-md svelte-maoyn7")&&i(x,"class",S)},i:h,o:h,d(e){e&&r(p),I=!1,T()}}}const O=12,R=36,A="w-96 h-80";function G(e){let t=0;for(const s of e){const e=s.codePointAt(0);t+=e&&(e>255||e<32)?2:1}return t}function M(e,t,s){let{code:o}=t,{cLanguage:n}=t;const a=Math.random().toString(36).slice(2,11),r=`code-editor-${a}`,l=`code-block-${a}`,c=B(),i=p(P);function u(e=void 0){if(e){const t=e.target,n=t.value.split("\n");if(d(n)){c.trigger(L("Textarea overflow.","Warning"));const s=t.selectionStart;return e.preventDefault(),e.stopImmediatePropagation(),t.value=o,void t.setSelectionRange(s-1,s-1)}s(0,o=t.value)}!function(e,t){const s=document.getElementById(e),o=document.createElement("code");o.id=e,o.innerHTML=t,o.className=s.className,i.highlightElement(o),s.replaceWith(o)}(l,o)}const d=e=>{if(e.length>O)return!0;for(const t of e)if(G(t)>R)return!0;return!1};let g=!1;return v((()=>{u(),s(5,g=!0)})),e.$$set=e=>{"code"in e&&s(0,o=e.code),"cLanguage"in e&&s(1,n=e.cLanguage)},e.$$.update=()=>{33&e.$$.dirty&&g&&void 0!==o&&u()},[o,n,r,l,u,g]}class U extends w{constructor(t){super(),$(this,t,M,z,e,{code:0,cLanguage:1})}}const _=e=>new Proxy(e,{has:(e,t)=>{if(t in e)return!0;throw new Error(`"${String(t)}" is not exist or not allowed.`)},get:(e,t)=>{if("string"==typeof t&&t in e)return e[t]}});function W(e,t){let s,o,n;if(e)try{const a=function(e,t){return new Function("proxy",`with (proxy) { "use strict"; ${e} }`)(_(t))}(e,t);n="string"==typeof a||"number"==typeof a||"boolean"==typeof a?String(a):Array.isArray(a)||"object"==typeof a?JSON.stringify(a,null,2):"(No Results)",s="Executed successfully.",o="Succeed"}catch(a){console.error("Failed to execute code:",a),n="(Failed)",s=a instanceof Error?`${a.name}: ${a.message}`:"UnknownError",o="Error"}else s="Code is empty.",o="Warning",n=null;return{resultString:n,message:s,status:o}}function F(e,t,s){const o=e.slice();return o[1]=t[s],o}function H(e){let s,l,g=e[1]+"";return{c(){s=t("span"),l=o(g),this.h()},l(e){s=n(e,"SPAN",{class:!0});var t=a(s);l=c(t,g),t.forEach(r),this.h()},h(){i(s,"class","block border border-gray-100 rounded-sm font-pixel10")},m(e,t){u(e,s,t),d(s,l)},p(e,t){1&t&&g!==(g=e[1]+"")&&f(l,g)},d(e){e&&r(s)}}}function q(e){let h,p,v,w,$,B,P,V,L,z,O,R,A,G,M,_,W,q,J,X,K,Q,Y,Z,ee,te,se,oe,ne,ae,re,le,ce,ie="Code Editor",ue='<div class="cButtonSpan"><span>Execute</span></div>',de="Result",ge=(e[0].resultString??"")+"",fe="Logs";function he(t){e[7](t)}let pe={cLanguage:"language-javascript"};void 0!==e[0].code&&(pe.code=e[0].code),P=new U({props:pe}),m.push((()=>S(P,"code",he)));let ve=N(e[0].logs),me=[];for(let t=0;t<ve.length;t+=1)me[t]=H(F(e,ve,t));return{c(){h=t("div"),p=t("div"),v=t("strong"),v.textContent=ie,w=s(),$=t("button"),$.textContent="✕",B=s(),D(P.$$.fragment),L=s(),z=t("div"),O=t("button"),O.innerHTML=ue,R=s(),A=t("div"),G=t("div"),M=t("div"),_=t("strong"),_.textContent=de,W=s(),q=t("button"),q.textContent="✕",J=s(),X=t("div"),K=t("span"),Q=o(ge),Y=s(),Z=t("div"),ee=t("div"),te=t("strong"),te.textContent=fe,se=s(),oe=t("button"),oe.textContent="✕",ne=s(),ae=t("div");for(let e=0;e<me.length;e+=1)me[e].c();this.h()},l(e){h=n(e,"DIV",{class:!0});var t=a(h);p=n(t,"DIV",{class:!0});var s=a(p);v=n(s,"STRONG",{class:!0,"data-svelte-h":!0}),"svelte-1lke8zs"!==y(v)&&(v.textContent=ie),w=l(s),$=n(s,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),"svelte-1v3143d"!==y($)&&($.textContent="✕"),s.forEach(r),B=l(t),I(P.$$.fragment,t),t.forEach(r),L=l(e),z=n(e,"DIV",{class:!0});var o=a(z);O=n(o,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),"svelte-12ji5zd"!==y(O)&&(O.innerHTML=ue),o.forEach(r),R=l(e),A=n(e,"DIV",{class:!0});var i=a(A);G=n(i,"DIV",{});var u=a(G);M=n(u,"DIV",{class:!0});var d=a(M);_=n(d,"STRONG",{class:!0,"data-svelte-h":!0}),"svelte-18lbitj"!==y(_)&&(_.textContent=de),W=l(d),q=n(d,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),"svelte-b1beh1"!==y(q)&&(q.textContent="✕"),d.forEach(r),J=l(u),X=n(u,"DIV",{class:!0});var g=a(X);K=n(g,"SPAN",{class:!0});var f=a(K);Q=c(f,ge),f.forEach(r),g.forEach(r),u.forEach(r),Y=l(i),Z=n(i,"DIV",{});var m=a(Z);ee=n(m,"DIV",{class:!0});var b=a(ee);te=n(b,"STRONG",{class:!0,"data-svelte-h":!0}),"svelte-r5pkvh"!==y(te)&&(te.textContent=fe),se=l(b),oe=n(b,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),"svelte-24816r"!==y(oe)&&(oe.textContent="✕"),b.forEach(r),ne=l(m),ae=n(m,"DIV",{class:!0});var x=a(ae);for(let n=0;n<me.length;n+=1)me[n].l(x);x.forEach(r),m.forEach(r),i.forEach(r),this.h()},h(){i(v,"class","cIndexSpan"),i($,"type","submit"),i($,"class","relative z-30"),i(p,"class","flex justify-between ml-2"),i(h,"class","col-span-1 lg:col-span-5"),i(O,"type","submit"),i(O,"class","cIconButtonStyle relative"),i(z,"class","col-span-1 lg:col-span-2 flex justify-center items-center"),i(_,"class","cIndexSpan"),i(q,"type","submit"),i(q,"class","relative z-30"),i(M,"class","flex justify-between ml-2"),i(K,"class","block font-pixel12"),i(X,"class","w-96 h-24 p-4 border border-gray-300 rounded-md overflow-y-auto"),i(te,"class","cIndexSpan"),i(oe,"type","submit"),i(oe,"class","relative z-30"),i(ee,"class","flex justify-between ml-2"),i(ae,"class","w-96 h-40 p-4 border border-gray-300 rounded-md space-y-1 overflow-y-auto"),i(A,"class","col-span-1 lg:col-span-5 space-y-4")},m(t,s){u(t,h,s),d(h,p),d(p,v),d(p,w),d(p,$),d(h,B),T(P,h,null),u(t,L,s),u(t,z,s),d(z,O),u(t,R,s),u(t,A,s),d(A,G),d(G,M),d(M,_),d(M,W),d(M,q),d(G,J),d(G,X),d(X,K),d(K,Q),d(A,Y),d(A,Z),d(Z,ee),d(ee,te),d(ee,se),d(ee,oe),d(Z,ne),d(Z,ae);for(let e=0;e<me.length;e+=1)me[e]&&me[e].m(ae,null);re=!0,le||(ce=[g($,"click",e[3]),g(O,"click",e[2]),g(q,"click",e[4]),g(oe,"click",e[5])],le=!0)},p(e,[t]){const s={};if(!V&&1&t&&(V=!0,s.code=e[0].code,b((()=>V=!1))),P.$set(s),(!re||1&t)&&ge!==(ge=(e[0].resultString??"")+"")&&f(Q,ge),1&t){let s;for(ve=N(e[0].logs),s=0;s<ve.length;s+=1){const o=F(e,ve,s);me[s]?me[s].p(o,t):(me[s]=H(o),me[s].c(),me[s].m(ae,null))}for(;s<me.length;s+=1)me[s].d(1);me.length=ve.length}},i(e){re||(k(P.$$.fragment,e),re=!0)},o(e){C(P.$$.fragment,e),re=!1},d(e){e&&(r(h),r(L),r(z),r(R),r(A)),j(P),x(me,e),le=!1,E(ce)}}}function J(e,t,s){let{codeExeProps:o}=t,{allowedGlobals:n}=t;const a={log:l,Math:Math,Date:Date},r=B();function l(e){const t=(new Date).toLocaleString();o.logs.push(`[${t}] ${e}`),s(0,o.logs=[...o.logs],o)}return e.$$set=e=>{"codeExeProps"in e&&s(0,o=e.codeExeProps),"allowedGlobals"in e&&s(6,n=e.allowedGlobals)},[o,l,function(){const e=W(o.code,{...a,...n});r.trigger(L(e.message,e.status)),null!==e.resultString&&s(0,o.resultString=e.resultString,o)},function(){s(0,o.code="",o)},function(){s(0,o.resultString="",o)},function(){s(0,o.logs=[],o)},n,function(t){e.$$.not_equal(o.code,t)&&(o.code=t,s(0,o))}]}class X extends w{constructor(t){super(),$(this,t,J,q,e,{codeExeProps:0,allowedGlobals:6,log:1})}get log(){return this.$$.ctx[1]}}export{X as C};
